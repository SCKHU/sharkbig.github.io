<!DOCTYPE html>
<html lang="zh-tw">
  <head>
    <link rel="stylesheet" href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.2.0/css/ol.css" type="text/css">

    <meta charset="utf-8">
    <style>
      .map {
        height: 800px;
        width: 100%;
      }
    </style>
    <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.2.0/build/ol.js"></script>
    <title>rescue2</title>

  </head>
  <body>
    <div id="map" class="map"></div>

    <script  type='text/javascript'>


  // LINE STYLE
  var style = {
    'Point': new ol.style.Style({
      image: new ol.style.Circle({
        // fill
        fill: new ol.style.Fill({
          color: 'rgba(255,255,0,0.4)'
        }),
        radius: 2,

        // stroke
        stroke: new ol.style.Stroke({
          color: '#ff0',
          width: 1
        })
      })
    }),

    'LineString': new ol.style.Style({
      stroke: new ol.style.Stroke({
        color: '#FF2D00',
        width: 1.5
      })
    }),
    'MultiLineString': new ol.style.Style({
      stroke: new ol.style.Stroke({
        color: '#FF2D00',
        width: 1.5
      })
    })
  };

var loadgpx = new ol.layer.Vector({
  source: new ol.source.Vector({
    url: 'data/1215-1222馬望海搜救路線._Lite.gpx',
    format: new ol.format.GPX()
  }),

  style: function(feature){
    return style[feature.getGeometry().getType()];
  }
});




// plot on map
var map = new ol.Map({
    target: 'map',
    layers: [
      new ol.layer.Tile({
        source: new ol.source.XYZ({
          url: 'https://rs.happyman.idv.tw/map/moi_osm/{z}/{x}/{y}.png'
        })
      }),
      loadgpx
    ],
    view: new ol.View({
      center: ol.proj.fromLonLat([121.30171,24.53225]),
      zoom: 14
    })
  });


////////////////////////////////////////////////////////////////
// update gpx code //






    </script>

    <script type="text/javascript" src="update.js"></script>

  </body>
</html>
